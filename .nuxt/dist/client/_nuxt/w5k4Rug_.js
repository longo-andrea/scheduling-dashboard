import{g as ie,R as de,C as ce,_ as z,$ as ue,a as ge,b as fe,c as Z}from"./DT9I7csn.js";import{r as j,e as me,f as h,g as t,i as G,h as ve,j as pe,k as he,l as ye,m as H,n as xe,p as _,o as i,q as T,w as f,b as u,a as g,s as b,v as P,x as E,d as Y,t as D,c as y,F as V,y as B,z as be,A as _e,B as ee}from"./DMS5LEkl.js";import{t as Ce,c as we,n as De,s as te,f as I}from"./CTkElQug.js";import{c as ke,t as ae,u as $e,r as Re,_ as ze,a as Ve}from"./CKIUVifN.js";import"./4gOEg11z.js";import"./BcsrA5oa.js";function W(a,o,e){const n=Ce(a,e==null?void 0:e.in);return isNaN(o)?we(a,NaN):(o&&n.setDate(n.getDate()+o),n)}function L(a,o,e){const[n,l]=De(e==null?void 0:e.in,a,o);return+te(n)==+te(l)}function Be(a,o,e){return W(a,-7,e)}function Me(){const a=j("");function o(s){a.value=s.id}const e=me({key:()=>["bookings",a.value],query:()=>fetch("https://605c94c36d85de00170da8b4.mockapi.io/stations").then(async s=>{var C;return(((C=(await s.json()).find(d=>d.id===a.value))==null?void 0:C.bookings)??[]).map(d=>({id:d.id,customer:d.customerName,dateRange:{from:new Date(d.startDate),to:new Date(d.endDate)}})).sort((d,c)=>d.dateRange.from.getTime()-c.dateRange.from.getTime())})}),n=h(()=>s=>{const{data:r}=e;return r.value?r.value.filter(v=>L(v.dateRange.from,s)||L(v.dateRange.to,s)):[]});function l(s){return e.data.value?e.data.value.find(v=>v.id===s):null}return{setFacility:o,...e,bookingsByDate:n,getBooking:l}}function Ne(a){return(o,e)=>Se(o,e,t(a))}function Se(a,o,e){return ie(e,`messages.${a}`,a).replace(/\{(\w+)\}/g,(l,s)=>`${(o==null?void 0:o[s])??`{${s}}`}`)}function Te(a){const o=h(()=>t(a).name),e=h(()=>t(a).code),n=h(()=>t(a).dir),l=G(a)?a:j(a);return{lang:o,code:e,dir:n,locale:l,t:Ne(a)}}function Pe(a){return ve(a,{dir:"ltr"})}const Ye=Pe({name:"English",code:"en",messages:{inputMenu:{noMatch:"No matching data",noData:"No data",create:'Create "{label}"'},calendar:{prevYear:"Previous year",nextYear:"Next year",prevMonth:"Previous month",nextMonth:"Next month"},inputNumber:{increment:"Increment",decrement:"Decrement"},commandPalette:{placeholder:"Type a command or search...",noMatch:"No matching data",noData:"No data",close:"Close"},selectMenu:{noMatch:"No matching data",noData:"No data",create:'Create "{label}"',search:"Search..."},toast:{close:"Close"},carousel:{prev:"Prev",next:"Next",goto:"Go to slide {slide}"},modal:{close:"Close"},slideover:{close:"Close"},alert:{close:"Close"},table:{noData:"No data"}}}),Ie=Symbol.for("nuxt-ui.locale-context"),He=a=>{const o=a||pe(he(Ie));return Te(h(()=>o.value||Ye))},Fe=ke(He),Le={slots:{root:"",header:"flex items-center justify-between",body:"flex flex-col space-y-4 pt-4 sm:flex-row sm:space-x-4 sm:space-y-0",heading:"text-center font-medium truncate mx-auto",grid:"w-full border-collapse select-none space-y-1 focus:outline-none",gridRow:"grid grid-cols-7",gridWeekDaysRow:"mb-1 grid w-full grid-cols-7",gridBody:"grid",headCell:"rounded-[calc(var(--ui-radius)*1.5)]",cell:"relative text-center",cellTrigger:["m-0.5 relative flex items-center justify-center rounded-full whitespace-nowrap focus-visible:ring-2 focus:outline-none data-disabled:text-(--ui-text-muted) data-unavailable:line-through data-unavailable:text-(--ui-text-muted) data-unavailable:pointer-events-none data-[selected]:text-(--ui-bg) data-today:font-semibold data-[outside-view]:text-(--ui-text-muted)","transition"]},variants:{color:{primary:{headCell:"text-(--ui-primary)",cellTrigger:"focus-visible:ring-(--ui-primary) data-[selected]:bg-(--ui-primary) data-today:not-data-[selected]:text-(--ui-primary) data-[highlighted]:bg-(--ui-primary)/20 hover:not-data-[selected]:bg-(--ui-primary)/20"},secondary:{headCell:"text-(--ui-secondary)",cellTrigger:"focus-visible:ring-(--ui-secondary) data-[selected]:bg-(--ui-secondary) data-today:not-data-[selected]:text-(--ui-secondary) data-[highlighted]:bg-(--ui-secondary)/20 hover:not-data-[selected]:bg-(--ui-secondary)/20"},success:{headCell:"text-(--ui-success)",cellTrigger:"focus-visible:ring-(--ui-success) data-[selected]:bg-(--ui-success) data-today:not-data-[selected]:text-(--ui-success) data-[highlighted]:bg-(--ui-success)/20 hover:not-data-[selected]:bg-(--ui-success)/20"},info:{headCell:"text-(--ui-info)",cellTrigger:"focus-visible:ring-(--ui-info) data-[selected]:bg-(--ui-info) data-today:not-data-[selected]:text-(--ui-info) data-[highlighted]:bg-(--ui-info)/20 hover:not-data-[selected]:bg-(--ui-info)/20"},warning:{headCell:"text-(--ui-warning)",cellTrigger:"focus-visible:ring-(--ui-warning) data-[selected]:bg-(--ui-warning) data-today:not-data-[selected]:text-(--ui-warning) data-[highlighted]:bg-(--ui-warning)/20 hover:not-data-[selected]:bg-(--ui-warning)/20"},error:{headCell:"text-(--ui-error)",cellTrigger:"focus-visible:ring-(--ui-error) data-[selected]:bg-(--ui-error) data-today:not-data-[selected]:text-(--ui-error) data-[highlighted]:bg-(--ui-error)/20 hover:not-data-[selected]:bg-(--ui-error)/20"},neutral:{headCell:"text-(--ui-bg-inverted)",cellTrigger:"focus-visible:ring-(--ui-border-inverted) data-[selected]:bg-(--ui-bg-inverted) data-today:not-data-[selected]:text-(--ui-bg-inverted) data-[highlighted]:bg-(--ui-bg-inverted)/20 hover:not-data-[selected]:bg-(--ui-bg-inverted)/10"}},size:{xs:{heading:"text-xs",cell:"text-xs",headCell:"text-[10px]",cellTrigger:"size-7",body:"space-y-2 pt-2"},sm:{heading:"text-xs",headCell:"text-xs",cell:"text-xs",cellTrigger:"size-7"},md:{heading:"text-sm",headCell:"text-xs",cell:"text-sm",cellTrigger:"size-8"},lg:{heading:"text-md",headCell:"text-md",cellTrigger:"size-9 text-md"},xl:{heading:"text-lg",headCell:"text-lg",cellTrigger:"size-10 text-lg"}}},defaultVariants:{size:"md",color:"primary"}},je=ye;var ne;const Ue=ae({extend:ae(Le),...((ne=je.ui)==null?void 0:ne.calendar)||{}}),Ee=H({__name:"Calendar",props:{as:{},nextYearIcon:{},nextYear:{},nextMonthIcon:{},nextMonth:{},prevYearIcon:{},prevYear:{},prevMonthIcon:{},prevMonth:{},color:{},size:{},range:{type:Boolean},multiple:{type:Boolean},monthControls:{type:Boolean,default:!0},yearControls:{type:Boolean,default:!0},defaultValue:{},modelValue:{},class:{},ui:{},defaultPlaceholder:{},placeholder:{},allowNonContiguousRanges:{type:Boolean},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},fixedWeeks:{type:Boolean,default:!0},maxValue:{},minValue:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{},isDateUnavailable:{},nextPage:{},prevPage:{}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(a,{emit:o}){const e=a,n=o,l=xe(),{code:s,dir:r,t:v}=Fe(),C=$e(Re(e,"range","modelValue","defaultValue","color","size","monthControls","yearControls","class","ui"),n),d=h(()=>e.nextYearIcon||(r.value==="rtl"?l.ui.icons.chevronDoubleLeft:l.ui.icons.chevronDoubleRight)),c=h(()=>e.nextMonthIcon||(r.value==="rtl"?l.ui.icons.chevronLeft:l.ui.icons.chevronRight)),$=h(()=>e.prevYearIcon||(r.value==="rtl"?l.ui.icons.chevronDoubleRight:l.ui.icons.chevronDoubleLeft)),m=h(()=>e.prevMonthIcon||(r.value==="rtl"?l.ui.icons.chevronRight:l.ui.icons.chevronLeft)),x=h(()=>Ue({color:e.color,size:e.size}));function U(k,A){return A===-1?k.subtract({years:1}):k.add({years:1})}const p=h(()=>e.range?de:ce);return(k,A)=>{var O;return i(),_(t(p).Root,T(t(C),{"model-value":k.modelValue,"default-value":k.defaultValue,locale:t(s),dir:t(r),class:x.value.root({class:[e.class,(O=e.ui)==null?void 0:O.root]})}),{default:f(({weekDays:se,grid:re})=>{var q,K;return[u(t(p).Header,{class:b(x.value.header({class:(q=e.ui)==null?void 0:q.header}))},{default:f(()=>{var R;return[e.yearControls?(i(),_(t(p).Prev,{key:0,"prev-page":w=>U(w,-1),"aria-label":t(v)("calendar.prevYear"),"as-child":""},{default:f(()=>[u(z,T({icon:$.value,size:e.size,color:"neutral",variant:"ghost"},e.prevYear),null,16,["icon","size"])]),_:1},8,["prev-page","aria-label"])):P("",!0),e.monthControls?(i(),_(t(p).Prev,{key:1,"aria-label":t(v)("calendar.prevMonth"),"as-child":""},{default:f(()=>[u(z,T({icon:m.value,size:e.size,color:"neutral",variant:"ghost"},e.prevMonth),null,16,["icon","size"])]),_:1},8,["aria-label"])):P("",!0),u(t(p).Heading,{class:b(x.value.heading({class:(R=e.ui)==null?void 0:R.heading}))},{default:f(({headingValue:w})=>[E(k.$slots,"heading",{value:w},()=>[Y(D(w),1)])]),_:3},8,["class"]),e.monthControls?(i(),_(t(p).Next,{key:2,"aria-label":t(v)("calendar.nextMonth"),"as-child":""},{default:f(()=>[u(z,T({icon:c.value,size:e.size,color:"neutral",variant:"ghost"},e.nextMonth),null,16,["icon","size"])]),_:1},8,["aria-label"])):P("",!0),e.yearControls?(i(),_(t(p).Next,{key:3,"next-page":w=>U(w,1),"aria-label":t(v)("calendar.nextYear"),"as-child":""},{default:f(()=>[u(z,T({icon:d.value,size:e.size,color:"neutral",variant:"ghost"},e.nextYear),null,16,["icon","size"])]),_:1},8,["next-page","aria-label"])):P("",!0)]}),_:3},8,["class"]),g("div",{class:b(x.value.body({class:(K=e.ui)==null?void 0:K.body}))},[(i(!0),y(V,null,B(re,R=>{var w;return i(),_(t(p).Grid,{key:R.value.toString(),class:b(x.value.grid({class:(w=e.ui)==null?void 0:w.grid}))},{default:f(()=>{var Q;return[u(t(p).GridHead,null,{default:f(()=>{var F;return[u(t(p).GridRow,{class:b(x.value.gridWeekDaysRow({class:(F=e.ui)==null?void 0:F.gridWeekDaysRow}))},{default:f(()=>[(i(!0),y(V,null,B(se,M=>{var N;return i(),_(t(p).HeadCell,{key:M,class:b(x.value.headCell({class:(N=e.ui)==null?void 0:N.headCell}))},{default:f(()=>[E(k.$slots,"week-day",{day:M},()=>[Y(D(M),1)])]),_:2},1032,["class"])}),128))]),_:2},1032,["class"])]}),_:2},1024),u(t(p).GridBody,{class:b(x.value.gridBody({class:(Q=e.ui)==null?void 0:Q.gridBody}))},{default:f(()=>[(i(!0),y(V,null,B(R.rows,(F,M)=>{var N;return i(),_(t(p).GridRow,{key:`weekDate-${M}`,class:b(x.value.gridRow({class:(N=e.ui)==null?void 0:N.gridRow}))},{default:f(()=>[(i(!0),y(V,null,B(F,S=>{var J;return i(),_(t(p).Cell,{key:S.toString(),date:S,class:b(x.value.cell({class:(J=e.ui)==null?void 0:J.cell}))},{default:f(()=>{var X;return[u(t(p).CellTrigger,{day:S,month:R.value,class:b(x.value.cellTrigger({class:(X=e.ui)==null?void 0:X.cellTrigger}))},{default:f(()=>[E(k.$slots,"day",{day:S},()=>[Y(D(S.day),1)])]),_:2},1032,["day","month","class"])]}),_:2},1032,["date","class"])}),128))]),_:2},1032,["class"])}),128))]),_:2},1032,["class"])]}),_:2},1032,["class"])}),128))],2)]}),_:3},16,["model-value","default-value","locale","dir","class"])}}}),le=H({__name:"DatePicker",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=new ue("en-US",{dateStyle:"medium"}),e=be(a,"modelValue");return(n,l)=>{const s=z,r=Ee,v=fe;return i(),_(v,null,{content:f(()=>[u(r,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=C=>e.value=C),class:"p-2"},null,8,["modelValue"])]),default:f(()=>[u(s,{color:"neutral",variant:"subtle",icon:"i-lucide-calendar",label:e.value?t(o).format(e.value.toDate(t(ge)())):"Select a date",ui:{label:"lg:block"}},null,8,["label"])]),_:1})}}});function Ge(){const a=j(new Z(2021,3,13));function o(e){let n;e==="previous"?n=Be(new Date(a.value.toString())):n=W(new Date(a.value.toString()),7);const l=n.getFullYear(),s=n.getMonth()+1,r=n.getDate();a.value=new Z(l,s,r)}return{targetDay:a,slideWeek:o}}function We(a,o="MMM dd EEE yyyy"){const{from:e,to:n}=a;return`${I(e,o)} → ${I(n,o)}`}function oe(a,o="HH:mm"){return I(a,o)}const Ae={class:"flex h-full flex-col gap-4 overflow-y-auto"},Oe=["onClick"],qe={key:0,class:"text-violet-900 lg:flex lg:h-full lg:items-center lg:gap-1 lg:border-r lg:border-violet-600 lg:px-4"},Ke={class:"rounded-md bg-violet-800 p-1 font-semibold text-white"},Qe={key:1,class:"text-violet-900 lg:flex lg:h-full lg:items-center lg:gap-1 lg:border-r lg:border-violet-600 lg:px-4"},Je={class:"rounded-md bg-violet-800 p-1 font-semibold text-white"},Xe={class:"flex flex-col gap-1 lg:border-r lg:border-violet-600"},Ze={class:"flex items-center gap-2 text-sm font-medium text-violet-900"},et={class:"flex flex-col gap-1"},tt={class:"text-xs text-violet-900"},at={key:0,class:"flex h-full w-full flex-col items-center justify-center rounded-md bg-slate-50 font-semibold text-slate-400"},lt=H({__name:"Schedules",props:{bookings:{},day:{}},setup(a){const o=h(()=>{var l;return(l=a.bookings)==null?void 0:l.length});function e(l){return L(a.day,l.to)}function n(l){_e(`/booking/${l}`)}return(l,s)=>(i(),y("ul",Ae,[(i(!0),y(V,null,B(l.bookings,r=>(i(),y("li",{key:r.id,class:"flex cursor-pointer flex-col gap-4 rounded-md bg-violet-200 p-4 hover:bg-violet-300 lg:grid lg:grid-cols-3 lg:items-center lg:gap-14",onClick:v=>n(r.id)},[e(r.dateRange)?(i(),y("h3",qe,[s[0]||(s[0]=g("span",{class:"font-semibold"}," Return ",-1)),s[1]||(s[1]=Y(" of a Van at ")),g("span",Ke,D(("formatHour"in l?l.formatHour:t(oe))(r.dateRange.to)),1)])):(i(),y("h3",Qe,[s[2]||(s[2]=g("span",{class:"font-semibold"}," Pickup ",-1)),s[3]||(s[3]=Y(" of a Van at ")),g("span",Je,D(("formatHour"in l?l.formatHour:t(oe))(r.dateRange.from)),1)])),s[6]||(s[6]=g("hr",{class:"border-violet-400 lg:hidden"},null,-1)),g("section",Xe,[s[4]||(s[4]=g("p",{class:"text-sm font-medium text-violet-900"},"Customer",-1)),g("p",Ze,[u(t(ze),{alt:r.customer,size:"sm",as:"span"},null,8,["alt"]),g("span",null,D(r.customer),1)])]),g("section",et,[s[5]||(s[5]=g("p",{class:"text-sm font-medium text-violet-900"},"Rental Duration",-1)),g("p",tt,D(("formatDateRange"in l?l.formatDateRange:t(We))(r.dateRange)),1)])],8,Oe))),128)),t(o)?P("",!0):(i(),y("li",at," No Pickups/Returns scheduled for this day "))]))}}),ot={key:0,class:"grid h-full grid-cols-7 grid-rows-[auto_auto_1fr] gap-2 rounded-md bg-white p-2 lg:grid-cols-11"},nt={class:"col-span-7 grid grid-cols-[auto_1fr_auto] gap-2 lg:hidden"},st=["onClick"],rt={class:"col-span-7 mt-2 grid grid-rows-[auto_1fr] gap-2 overflow-hidden lg:col-span-11 lg:row-span-2"},it={key:1,class:"flex h-full flex-col items-center justify-center rounded-md bg-white font-semibold text-slate-400"},dt=H({__name:"Dashboard",props:{facility:{}},setup(a){const o=j(new Date);function e(d){o.value=d}const{targetDay:n,slideWeek:l}=Ge();ee(n,d=>{o.value=new Date(d.toString())},{immediate:!0});const s=h(()=>Array.from({length:7}).map((d,c)=>W(new Date(n.value.toString()),c))),{bookingsByDate:r,setFacility:v}=Me();ee(()=>a.facility,d=>{d&&v(d)},{immediate:!0});const C=h(()=>d=>L(d,o.value)?{container:"bg-violet-200 bg-opacity-50 text-violet-900",day:"text-violet-900",date:"text-violet-400"}:{container:"bg-transparent hover:bg-violet-50",day:"text-slate-900",date:"text-slate-400"});return(d,c)=>{const $=z;return d.facility?(i(),y("div",ot,[g("div",nt,[u($,{icon:"i-carbon:arrow-left",size:"md",variant:"ghost",onClick:c[0]||(c[0]=m=>t(l)("previous"))}),u(le,{modelValue:t(n),"onUpdate:modelValue":c[1]||(c[1]=m=>G(n)?n.value=m:null)},null,8,["modelValue"]),u($,{icon:"i-carbon:arrow-right",size:"md",variant:"ghost",onClick:c[2]||(c[2]=m=>t(l)("next"))})]),u(le,{modelValue:t(n),"onUpdate:modelValue":c[3]||(c[3]=m=>G(n)?n.value=m:null),class:"col-span-2 hidden lg:block"},null,8,["modelValue"]),u($,{icon:"i-carbon:arrow-left",class:"hidden lg:block",size:"md",variant:"ghost",onClick:c[4]||(c[4]=m=>t(l)("previous"))}),(i(!0),y(V,null,B(t(s),(m,x)=>(i(),y("div",{key:x,class:b(["flex cursor-pointer flex-col items-center justify-center rounded-md py-3 transition-colors duration-250",t(C)(m).container]),onClick:U=>e(m)},[g("p",{class:b(["text-lg font-semibold",t(C)(m).day])},D(t(I)(m,"dd")),3),g("p",{class:b(["text-sm font-light",t(C)(m).date])},D(t(I)(m,"EE")),3)],10,st))),128)),u($,{icon:"i-carbon:arrow-right",class:"hidden lg:block",size:"md",variant:"ghost",onClick:c[5]||(c[5]=m=>t(l)("next"))}),g("section",rt,[c[6]||(c[6]=g("h2",{class:"text-lg font-medium text-slate-900"},"Schedule of the day",-1)),u(t(lt),{bookings:t(r)(t(o)),day:t(o)},null,8,["bookings","day"])])])):(i(),y("div",it," Select a facility to see the schedule "))}}}),pt=H({__name:"index",setup(a){const{facility:o}=Ve();return(e,n)=>{const l=dt;return i(),_(l,{facility:t(o)},null,8,["facility"])}}});export{pt as default};
